(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{287:function(s,t,r){"use strict";r.r(t);var e=r(14),a=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"frontmatter-title"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#frontmatter-title"}},[s._v("#")]),s._v(" "+s._s(s.$frontmatter.title))]),s._v(" "),t("p",[s._v("记录一下 Dockerfile")]),s._v(" "),t("div",{staticClass:"language-Dockerfile extra-class"},[t("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[t("code",[t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" ubuntu:22.04")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" sed -i "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"s@http://.*archive.ubuntu.com@http://mirrors.tuna.tsinghua.edu.cn@g"')]),s._v(" /etc/apt/sources.list")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" sed -i "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"s@http://.*security.ubuntu.com@http://mirrors.tuna.tsinghua.edu.cn@g"')]),s._v(" /etc/apt/sources.list")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" apt-get update && "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("\\")]),s._v("\n    apt-get install -y net-tools openssh-server psmisc iproute2 wget vim")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" ssh-keygen -t rsa -f ~/.ssh/id_rsa -P "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v(" && cat /root/.ssh/id_rsa.pub >> /root/.ssh/authorized_keys && "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("\\")]),s._v("\n    sed -i "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/PermitEmptyPasswords yes/PermitEmptyPasswords no /'")]),s._v(" /etc/ssh/sshd_config && "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("\\")]),s._v("\n    sed -i "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/PermitRootLogin without-password/PermitRootLogin yes /'")]),s._v(" /etc/ssh/sshd_config && "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("\\")]),s._v("\n    echo "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" StrictHostKeyChecking no"')]),s._v(" >> /etc/ssh/ssh_config && "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("\\")]),s._v("\n    echo "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" UserKnownHostsFile /dev/null"')]),s._v(" >> /etc/ssh/ssh_config && "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("\\")]),s._v("\n    echo "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root:1234"')]),s._v(" | chpasswd")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token instruction"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CMD")]),s._v(" [ "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sh"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-c"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"service ssh start; bash"')]),s._v("]")]),s._v("\n")])])])])}),[],!1,null,null,null);t.default=a.exports}}]);